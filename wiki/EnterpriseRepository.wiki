#summary Enterprise Repository

<wiki:toc />

= Introduction =

Enterprise Repository plays one of the most important role in corporate Maven infrastructure. It acts as:

 * Highly configurable proxy for public repositories
 * Place where corporate artifacts are deployed
 * Place where 3rd party artifacts (not available in any public repository) are deployed

= Repository Managers =

 * Artifactory [http://www.jfrog.org/]
 * Nexus [http://nexus.sonatype.org/]
 * Archiva [http://archiva.apache.org/]

The most comprehensive repository manager [http://docs.codehaus.org/display/MAVENUSER/Maven+Repository+Manager+Feature+Matrix feature matrix] is managed by codehaus.

= Maven Configuration =

Regardless of selected repository product, Maven configuration is similar. The main goal of the configuration is to force Maven to use only corporate repository.

For complete Maven settings reference please look at: [http://maven.apache.org/settings.html]

== Mirror Configuration  ==

To force Maven to use only corporate repository, `mirror` section must be defined as follow:

{{{
<mirror>
  <id>acme-repository</id>
  <url>http://repository.intranet.acme.com/acme/</url>
  <mirrorOf>*</mirrorOf>
</mirror>
}}}

For more details please refer to [http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html documentation].

== Repository Profiles ==

{{{
<profile>
  <id>acme-repository</id>
  <repositories>
    <repository>
      <id>central</id>
      <url>http://central</url>
      <releases><enabled>true</enabled></releases>
      <snapshots><enabled>true</enabled></snapshots>
    </repository>
    </repositories>
    <pluginRepositories>
      <pluginRepository>
      <id>central</id>
      <url>http://central</url>
      <releases><enabled>true</enabled></releases>
      <snapshots><enabled>true</enabled></snapshots>     </pluginRepository>
  </pluginRepositories>
</profile>
}}}

The profile must be enabled by default:

{{{
<activeProfiles>
  <activeProfile>acme-repository</activeProfile>
</activeProfiles>
}}}


== Configuration distribution ==

It is crucial to distribute Maven configuration in the corporation. Maven installation and configuration must be as easy as downloading official Maven distribution and applying corporate specific settings. The configuration documentation and predefined `settings.xml` should be published, e.g: on corporate Wiki. 

If new repositories are needed, configure them on corporate repository level (as a proxy) not in the Maven settings. Avoid any modification in the Maven client configuration, the configuration distribution to hundreds developers is painful. 

The configuration must be also applied on Continuous Integration server. The Continuous Integrations server is often configured as agents located on multiple servers. Manage Maven configuration with SCM and distribute it to all agents (configuration overlay). The process can be also automated within tools like [http://linux.die.net/man/1/rdist rdist]. 